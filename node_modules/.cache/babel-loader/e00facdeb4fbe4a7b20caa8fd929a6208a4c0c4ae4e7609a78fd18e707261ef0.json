{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import{useActions}from\"../hooks/useActions\";import{useTypedSelector}from\"../hooks/useTypedSelector\";import\"./SearchContainer.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchContainer=function SearchContainer(){var _useActions=useActions(),setRequesTitleAction=_useActions.setRequesTitleAction,removeRequestTitleAction=_useActions.removeRequestTitleAction,getFetchImagesAction=_useActions.getFetchImagesAction,getFetchMoreImagesAction=_useActions.getFetchMoreImagesAction,isPaginationAction=_useActions.isPaginationAction;var _useTypedSelector=useTypedSelector(function(state){return state.images;}),requestTitle=_useTypedSelector.requestTitle,isLoading=_useTypedSelector.isLoading,images=_useTypedSelector.images,noGetImages=_useTypedSelector.noGetImages,isPagination=_useTypedSelector.isPagination,pageNumber=_useTypedSelector.pageNumber;console.log(images);// const [page, setPage] = useState(1);\nvar title=useRef(null);function setTitle(e){var _title$current;setRequesTitleAction(String((_title$current=title.current)===null||_title$current===void 0?void 0:_title$current.value));}var removeRequestTitle=function removeRequestTitle(event){var target=event.target;if(target.classList.value===\"inputBlock\"){removeRequestTitleAction();}};function getImages(){getFetchImagesAction(requestTitle,pageNumber);}function search(e){if(e.keyCode==13)getFetchImagesAction(requestTitle,pageNumber);}var handleScroll=function handleScroll(title,currentPage){return function(event){if(isPagination===false&&event.target.documentElement.scrollHeight-(event.target.documentElement.scrollTop+window.innerHeight)<100&&event.target.documentElement.scrollHeight-(event.target.documentElement.scrollTop+window.innerHeight)>0){isPaginationAction();// setPage((prevState) => prevState + 1);\ngetFetchMoreImagesAction(title,currentPage+1);}};};useEffect(function(){var scrollHandler=handleScroll(requestTitle,pageNumber);window.addEventListener(\"scroll\",scrollHandler);return function(){window.removeEventListener(\"scroll\",scrollHandler);};},[isPagination]);return/*#__PURE__*/_jsxs(\"div\",{style:{bottom:noGetImages?\"-59px\":\"0\",width:images.length>0||isLoading||noGetImages?\"\":\"auto\"},className:\"SearchContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputContainer2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconLeft\"}),/*#__PURE__*/_jsx(\"div\",{className:\"inputBlock\",onClick:function onClick(e){return removeRequestTitle(e);},children:/*#__PURE__*/_jsx(\"input\",{value:requestTitle,ref:title,onChange:function onChange(e){return setTitle(e);},onKeyDown:function onKeyDown(e){return search(e);},type:\"text\",className:\"textInputField\",placeholder:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u044B, \\u044F\\u0431\\u043B\\u043E\\u043A\\u0438, \\u0433\\u0440\\u0443\\u0448\\u0438...\"})})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(e){return getImages();},className:\"getFetch\",children:[\" \",\"\\u0418\\u0441\\u043A\\u0430\\u0442\\u044C\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:noGetImages?\"block\":\"none\"},className:\"noResult\",children:/*#__PURE__*/_jsx(\"p\",{children:\" \\u041A \\u0441\\u043E\\u0436\\u0430\\u043B\\u0435\\u043D\\u0438\\u044E, \\u043F\\u043E\\u0438\\u0441\\u043A \\u043D\\u0435 \\u0434\\u0430\\u043B \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432 \"})})]});};export default SearchContainer;","map":{"version":3,"names":["React","useEffect","useRef","useActions","useTypedSelector","jsx","_jsx","jsxs","_jsxs","SearchContainer","_useActions","setRequesTitleAction","removeRequestTitleAction","getFetchImagesAction","getFetchMoreImagesAction","isPaginationAction","_useTypedSelector","state","images","requestTitle","isLoading","noGetImages","isPagination","pageNumber","console","log","title","setTitle","e","_title$current","String","current","value","removeRequestTitle","event","target","classList","getImages","search","keyCode","handleScroll","currentPage","documentElement","scrollHeight","scrollTop","window","innerHeight","scrollHandler","addEventListener","removeEventListener","style","bottom","width","length","className","children","onClick","ref","onChange","onKeyDown","type","placeholder","display"],"sources":["/Users/romansehovcev/Documents/GitHub/test-project-sapsan/work-test-sapsan/src/components/SearchContainer.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useActions } from \"../hooks/useActions\";\nimport { useTypedSelector } from \"../hooks/useTypedSelector\";\nimport \"./SearchContainer.css\";\n\nconst SearchContainer = () => {\n  const {\n    setRequesTitleAction,\n    removeRequestTitleAction,\n    getFetchImagesAction,\n    getFetchMoreImagesAction,\n    isPaginationAction,\n  } = useActions();\n  const { requestTitle, isLoading, images, noGetImages, isPagination, pageNumber } =\n    useTypedSelector((state) => state.images);\n  console.log(images);\n\n  // const [page, setPage] = useState(1);\n\n  const title = useRef<HTMLInputElement>(null);\n  function setTitle(e: React.ChangeEvent<HTMLInputElement>) {\n    setRequesTitleAction(String(title.current?.value));\n  }\n\n  const removeRequestTitle = (\n    event: React.MouseEvent<HTMLDivElement>\n  ): void => {\n    const target = event.target as HTMLElement;\n    if (target.classList.value === \"inputBlock\") {\n      removeRequestTitleAction();\n    }\n  };\n\n  function getImages() {\n    getFetchImagesAction(requestTitle, pageNumber);\n  }\n\n  function search(e: any) {\n    if (e.keyCode == 13) getFetchImagesAction(requestTitle, pageNumber);\n  }\n\n  const handleScroll = (\n    title: string,\n    currentPage: number\n  ): ((event: Event) => void) => {\n    return (event: any) => {\n      if (\n        isPagination === false &&\n        event.target.documentElement.scrollHeight -\n          (event.target.documentElement.scrollTop + window.innerHeight) <\n          100 &&\n        event.target.documentElement.scrollHeight -\n          (event.target.documentElement.scrollTop + window.innerHeight) >\n          0\n      ) {\n        isPaginationAction();\n        // setPage((prevState) => prevState + 1);\n        getFetchMoreImagesAction(title, currentPage + 1);\n      }\n    };\n  };\n\n  useEffect(() => {\n    const scrollHandler = handleScroll(requestTitle, pageNumber);\n    window.addEventListener(\"scroll\", scrollHandler);\n\n    return () => {\n      window.removeEventListener(\"scroll\", scrollHandler);\n    };\n  }, [isPagination]);\n\n  return (\n    <div\n      style={{\n        bottom: noGetImages ? \"-59px\" : \"0\",\n        width: images.length > 0 || isLoading || noGetImages ? \"\" : \"auto\",\n      }}\n      className=\"SearchContainer\"\n    >\n      <div className=\"inputContainer\">\n        <div className=\"inputContainer2\">\n          <span className=\"iconLeft\" />\n          <div className=\"inputBlock\" onClick={(e) => removeRequestTitle(e)}>\n            <input\n              value={requestTitle}\n              ref={title}\n              onChange={(e) => setTitle(e)}\n              onKeyDown={(e) => search(e)}\n              type=\"text\"\n              className=\"textInputField\"\n              placeholder=\"Телефоны, яблоки, груши...\"\n            />\n          </div>\n        </div>\n\n        <button onClick={(e) => getImages()} className=\"getFetch\">\n          {\" \"}\n          Искать\n        </button>\n      </div>\n      <div\n        style={{\n          display: noGetImages ? \"block\" : \"none\",\n        }}\n        className=\"noResult\"\n      >\n        <p> К сожалению, поиск не дал результатов </p>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}